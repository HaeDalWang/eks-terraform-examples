controller:
  autoscaling:
    enabled: true
    minReplicas: 1
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 70
  resources:
    requests:
      cpu: 200m
      memory: 256Mi
  service:
    annotations:
      service.beta.kubernetes.io/aws-load-balancer-type: external
      service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing
      service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: ip
      service.beta.kubernetes.io/aws-load-balancer-backend-protocol: tcp
      service.beta.kubernetes.io/aws-load-balancer-ssl-ports: "443"
      service.beta.kubernetes.io/aws-load-balancer-ssl-cert: ${lb_acm_certificate_arn}
      service.beta.kubernetes.io/aws-load-balancer-proxy-protocol: "*"
      service.beta.kubernetes.io/aws-load-balancer-attributes: load_balancing.cross_zone.enabled=true
      # NLB Target Group 속성: Proxy Protocol v2 + 클라이언트 IP 보존
      service.beta.kubernetes.io/aws-load-balancer-target-group-attributes: proxy_protocol_v2.enabled=true,preserve_client_ip.enabled=true
    targetPorts:
      https: http
  config:
    use-proxy-protocol: "true"
    real-ip-header: "proxy_protocol"
    # Proxy Protocol 헤더를 신뢰할 IP 범위 (VPC CIDR 또는 0.0.0.0/0)
    set-real-ip-from: "10.0.0.0/8"
    use-forwarded-headers: "true"
    # X-Forwarded-For 헤더 재귀적 탐색 활성화
    compute-full-forwarded-for: "true"
    annotations-risk-level: "Critical"
  allowSnippetAnnotations: true
  metrics:
    enabled: false
    serviceMonitor:
      enabled: false